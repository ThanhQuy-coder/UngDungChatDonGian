Index: src/main/java/com/simplechat/controllers/ChatController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.simplechat.controllers;\r\n\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.layout.StackPane;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Optional;\r\n\r\npublic class ChatController {\r\n    public VBox contactsPane;\r\n    public VBox requestsPane;\r\n    @FXML private Label usernameLabel;\r\n    @FXML private ListView<String> contactsList;\r\n    @FXML private Label currentChatLabel;\r\n    @FXML private ListView<String> messagesList;\r\n    @FXML private TextField messageInput;\r\n    @FXML private Label userProfileName;\r\n\r\n    // Mới thêm:\r\n    @FXML private ListView<String> requestsList;\r\n    @FXML private TextField searchField;\r\n    @FXML private Button contactsTabBtn;\r\n    @FXML private Button requestsTabBtn;\r\n    @FXML private StackPane tabContent;\r\n\r\n    private String currentContact;\r\n\r\n    @FXML\r\n    public void initialize() {\r\n        // Tab mặc định\r\n        showRequestsTab();\r\n\r\n        // Lắng nghe click contact\r\n        contactsList.getSelectionModel().selectedItemProperty().addListener((obs, oldVal, newVal) -> {\r\n            if (newVal != null) {\r\n                currentContact = newVal.split(\" \")[0];\r\n                currentChatLabel.setText(\"Chat with \" + currentContact);\r\n                loadChatHistory(currentContact);\r\n            }\r\n        });\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        usernameLabel.setText(username);\r\n        userProfileName.setText(username);\r\n    }\r\n\r\n    @FXML\r\n    private void handleSendMessage() {\r\n        String message = messageInput.getText().trim();\r\n        if (!message.isEmpty() && currentContact != null) {\r\n            messagesList.getItems().add(\"You: \" + message);\r\n            messageInput.clear();\r\n            // TODO: Gửi tin nhắn\r\n            messagesList.scrollTo(messagesList.getItems().size() - 1);\r\n        }\r\n    }\r\n\r\n    @FXML\r\n    private void handleLogout() {\r\n        try {\r\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(\"/com/example/web_chatdongian/views/sign_in.fxml\"));\r\n            Parent root = loader.load();\r\n            Stage stage = (Stage) usernameLabel.getScene().getWindow();\r\n            stage.setScene(new Scene(root));\r\n            stage.setTitle(\"Sign In\");\r\n        } catch (IOException e) {\r\n            System.err.println(\"Error loading sign in screen: \" + e.getMessage());\r\n        }\r\n    }\r\n\r\n    @FXML\r\n    private void handleChangeAvatar() {\r\n        // TODO: Implement avatar change\r\n        System.out.println(\"Change Avatar clicked\");\r\n    }\r\n\r\n    private void loadChatHistory(String contact) {\r\n        messagesList.getItems().clear();\r\n        // TODO: Load từ database/service\r\n        messagesList.getItems().add(\"Loaded chat history with \" + contact);\r\n    }\r\n\r\n    public void receiveMessage(String sender, String message) {\r\n        messagesList.getItems().add(sender + \": \" + message);\r\n        messagesList.scrollTo(messagesList.getItems().size() - 1);\r\n    }\r\n\r\n    @FXML\r\n    private void handleSendFriendRequest(javafx.event.ActionEvent actionEvent) {\r\n        TextInputDialog dialog = new TextInputDialog();\r\n        dialog.setTitle(\"Gửi lời mời kết bạn\");\r\n        dialog.setHeaderText(\"Nhập email người bạn muốn kết bạn:\");\r\n        dialog.setContentText(\"Email:\");\r\n\r\n        Optional<String> result = dialog.showAndWait();\r\n        result.ifPresent(email -> {\r\n            boolean success = sendFriendRequest(email);\r\n            if (success) {\r\n                showAlert(Alert.AlertType.INFORMATION, \"Thành công\", \"Lời mời đã được gửi đến \" + email);\r\n            } else {\r\n                showAlert(Alert.AlertType.ERROR, \"Lỗi\", \"Không thể gửi lời mời!\");\r\n            }\r\n        });\r\n    }\r\n\r\n    private boolean sendFriendRequest(String email) {\r\n        System.out.println(\"Đã gửi lời mời kết bạn đến: \" + email);\r\n        return true;\r\n    }\r\n\r\n    public void showFriendRequestDialog(String senderEmail) {\r\n        Alert alert = new Alert(Alert.AlertType.CONFIRMATION);\r\n        alert.setTitle(\"Lời mời kết bạn\");\r\n        alert.setHeaderText(senderEmail + \" muốn kết bạn với bạn!\");\r\n        alert.setContentText(\"Bạn có đồng ý không?\");\r\n\r\n        ButtonType buttonTypeYes = new ButtonType(\"Đồng ý\", ButtonBar.ButtonData.YES);\r\n        ButtonType buttonTypeNo = new ButtonType(\"Từ chối\", ButtonBar.ButtonData.NO);\r\n        alert.getButtonTypes().setAll(buttonTypeYes, buttonTypeNo);\r\n\r\n        Optional<ButtonType> result = alert.showAndWait();\r\n        if (result.get() == buttonTypeYes) {\r\n            acceptFriendRequest(senderEmail);\r\n        } else {\r\n            rejectFriendRequest(senderEmail);\r\n        }\r\n    }\r\n\r\n    private void acceptFriendRequest(String email) {\r\n        System.out.println(\"Đã chấp nhận lời mời từ: \" + email);\r\n        contactsList.getItems().add(email + \" (online)\");\r\n        requestsList.getItems().remove(email + \" - accept/decline\");\r\n    }\r\n\r\n    private void rejectFriendRequest(String email) {\r\n        System.out.println(\"Đã từ chối lời mời từ: \" + email);\r\n        requestsList.getItems().remove(email + \" - accept/decline\");\r\n    }\r\n\r\n    private void showAlert(Alert.AlertType type, String title, String message) {\r\n        Alert alert = new Alert(type);\r\n        alert.setTitle(title);\r\n        alert.setHeaderText(null);\r\n        alert.setContentText(message);\r\n        alert.showAndWait();\r\n    }\r\n\r\n    // ============================\r\n    // Tab Switching Logic\r\n    // ============================\r\n    @FXML\r\n    public void showContactsTab() {\r\n        contactsList.setVisible(true);\r\n        requestsList.setVisible(false);\r\n        searchField.setVisible(false);\r\n\r\n        contactsTabBtn.setStyle(\"-fx-background-color: transparent; -fx-font-weight: bold; -fx-border-color: transparent transparent #1A237E transparent; -fx-border-width: 0 0 2 0;\");\r\n        requestsTabBtn.setStyle(\"-fx-background-color: transparent; -fx-font-weight: normal; -fx-border-color: transparent; -fx-border-width: 0 0 2 0;\");\r\n    }\r\n\r\n    @FXML\r\n    public void showRequestsTab() {\r\n        contactsList.setVisible(false);\r\n        requestsList.setVisible(true);\r\n        searchField.setVisible(true);\r\n\r\n        contactsTabBtn.setStyle(\"-fx-background-color: transparent; -fx-font-weight: normal; -fx-border-color: transparent; -fx-border-width: 0 0 2 0;\");\r\n        requestsTabBtn.setStyle(\"-fx-background-color: transparent; -fx-font-weight: bold; -fx-border-color: transparent transparent #1A237E transparent; -fx-border-width: 0 0 2 0;\");\r\n    }\r\n\r\n    // (Optional) Add friend request to list\r\n    public void addFriendRequest(String email) {\r\n        requestsList.getItems().add(email + \" - accept/decline\");\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/simplechat/controllers/ChatController.java b/src/main/java/com/simplechat/controllers/ChatController.java
--- a/src/main/java/com/simplechat/controllers/ChatController.java	(revision 8b2896a7afa7cae8310e38f9e45d3121697f6609)
+++ b/src/main/java/com/simplechat/controllers/ChatController.java	(date 1745598991340)
@@ -175,7 +175,7 @@
         requestsTabBtn.setStyle("-fx-background-color: transparent; -fx-font-weight: bold; -fx-border-color: transparent transparent #1A237E transparent; -fx-border-width: 0 0 2 0;");
     }
 
-    // (Optional) Add friend request to list
+//     (Optional) Add friend request to list
     public void addFriendRequest(String email) {
         requestsList.getItems().add(email + " - accept/decline");
     }
